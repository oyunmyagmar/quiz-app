generator client {
  provider      = "prisma-client-js"
  engineType    = "library"
  binaryTargets = ["native", "rhel-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  directUrl = env("DIRECT_URL") 
}

model articles {
  id        String     @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  title     String?
  content   String?
  summary   String?
  userid    String     @db.Uuid
  createdat DateTime?  @default(now()) @db.Timestamptz(6)
  updatedat DateTime?  @default(now()) @db.Timestamptz(6)
  users     users      @relation(fields: [userid], references: [id], onDelete: NoAction, onUpdate: NoAction)
  attempts  attempts[]
  quizzes   quizzes[]
}

model quizzes {
  id        String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  question  String?
  options   String[]
  answer    String?
  articleid String    @db.Uuid
  createdat DateTime? @default(now()) @db.Timestamptz(6)
  updatedat DateTime? @default(now()) @db.Timestamptz(6)
  articles  articles  @relation(fields: [articleid], references: [id], onDelete: NoAction, onUpdate: NoAction)
  scores    scores[]
}

model scores {
  id            String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  quizid        String    @db.Uuid
  userid        String    @db.Uuid
  attemptid     String    @db.Uuid
  score         Int?
  useranswer    String?
  correctanswer String?
  createdat     DateTime? @default(now()) @db.Timestamptz(6)
  updatedat     DateTime? @default(now()) @db.Timestamptz(6)
  attempts      attempts  @relation(fields: [attemptid], references: [id], onDelete: NoAction, onUpdate: NoAction)
  quizzes       quizzes   @relation(fields: [quizid], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users         users     @relation(fields: [userid], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model users {
  id        String     @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  clerkid   String     @unique
  email     String     @unique @db.VarChar(50)
  name      String?    @db.VarChar(50)
  createdat DateTime?  @default(now()) @db.Timestamptz(6)
  updatedat DateTime?  @default(now()) @db.Timestamptz(6)
  articles  articles[]
  attempts  attempts[]
  scores    scores[]
}

model mocksummary {
  id      String  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  text    String?
  summary String?
}

model attempts {
  id        String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  articleid String    @db.Uuid
  userid    String    @db.Uuid
  timespent Int?
  createdat DateTime? @default(now()) @db.Timestamptz(6)
  updatedat DateTime? @default(now()) @db.Timestamptz(6)
  articles  articles  @relation(fields: [articleid], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users     users     @relation(fields: [userid], references: [id], onDelete: NoAction, onUpdate: NoAction)
  scores    scores[]
}
